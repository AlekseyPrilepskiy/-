internal class Program
{
    private static void Main(string[] args)
    {
        const string CommandToExit = "N";

        int sellerMoney = 0;
        int buyerMoney = 700;

        bool isOpen = true;

        Seller seller = new Seller(sellerMoney);
        Buyer buyer = new Buyer(buyerMoney);

        while (isOpen)
        {
            buyer.ShowInfo();

            seller.ShowInfo();

            Console.Write("\nНапишите название продукта, который вы хотите взять: ");
            string name = Console.ReadLine();

            if (seller.FindProduct(name, out Product product))
            {
                if (buyer.ShowMoney() >= product.Price)
                {
                    seller.SellProduct(product);
                    buyer.BuyProduct(product);
                }
                else
                {
                    Console.WriteLine("Недостаточно средств.");
                }
            }
            else
            {
                Console.WriteLine("Продукт не найден.");
            }

            Console.WriteLine($"Нажмите любую клавишу для продолжения. Чтобы выйти нажмите {CommandToExit}.");

            if (Console.ReadLine().ToLower() == CommandToExit.ToLower())
            {
                Console.WriteLine("Спасибо, что зашли в наш магазин.");

                buyer.ShowInfo();

                isOpen = false;

                Console.ReadLine();
            }

            Console.Clear();
        }
    }
}

class Product
{
    public Product(string name, int price)
    {
        Name = name;
        Price = price;
    }

    public string Name { get; private set; }
    public int Price { get; private set; }
}

class Human
{
    protected List<Product> _products;
    protected int _money;

    public Human(int money)
    {
        _products = new List<Product>();
        _money = money;
    }

    public virtual void ShowInfo()
    {
        Console.WriteLine($"В кошельке {_money} денег.");

        Console.WriteLine("Корзина:");

        foreach (Product product in _products)
        {
            Console.WriteLine(product.Name);
        }

        Console.WriteLine();
    }
}

class Buyer : Human
{
    public Buyer(int money) : base(money) { }

    public void BuyProduct(Product product)
    {
        _products.Add(product);
        SpendMoney(product.Price);

        Console.WriteLine("Товар добавлен в корзину.");
    }

    public int ShowMoney()
    {
        return _money;
    }

    private void SpendMoney(int price)
    {
        _money -= price;
    }
}

class Seller : Human
{
    public Seller(int money) : base(money)
    {
        FillWarehouse();
    }

    public override void ShowInfo()
    {
        Console.WriteLine($"В кассе {_money} денег.\n");

        Console.WriteLine("Список продуктов продавца:");

        foreach (Product product in _products)
        {
            Console.WriteLine($"{product.Name}. цена: {product.Price}");
        }
    }

    public bool FindProduct(string name, out Product desiredProduct)
    {
        foreach (Product product in _products)
        {
            if (product.Name.ToLower() == name.ToLower())
            {
                desiredProduct = product;
                return true;
            }
        }

        desiredProduct = null;
        return false;
    }

    public void SellProduct(Product product)
    {
        AddMoney(product.Price);
        _products.Remove(product);
    }

    private void AddMoney(int price)
    {
        _money += price;
    }

    private void FillWarehouse()
    {
        _products.Add(new Product("Помидор", 5));
        _products.Add(new Product("Огурец", 4));
        _products.Add(new Product("Чипсы", 90));
        _products.Add(new Product("Сок", 80));
        _products.Add(new Product("Яблоко", 7));
        _products.Add(new Product("Доширак", 55));
        _products.Add(new Product("Колбаса", 255));
        _products.Add(new Product("Сосиски", 210));
        _products.Add(new Product("Сыр", 175));
        _products.Add(new Product("Масло", 160));
        _products.Add(new Product("Йогурт", 65));
        _products.Add(new Product("Молоко", 75));
        _products.Add(new Product("Яйца", 115));
        _products.Add(new Product("Курица", 355));
    }
}
